<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>çŒœæ•¸å­—å¹¾Aå¹¾B</title>

  <!-- CSSï¼šè¨­å®šåŸºæœ¬æ¨£å¼ -->
  <style>
    body 
    {
    font-family: sans-serif; 
    padding: 20px; 
    word-break: break-word; /* åŠ é€™ä¸€è¡Œè®“å­—é‡åˆ°é‚Šç•Œæœƒè‡ªå‹•æ›è¡Œ */
    }
    input { margin-right: 10px; }

    #result {
    max-width: 100%;        /* ä¸è®“å…§å®¹è¶…å‡ºç•«é¢ */
    word-wrap: break-word;  /* å¦‚æœå¤ªé•·æœƒè‡ªå‹•æ›è¡Œ */
    }
  </style>
</head>
<body>
  <!-- æ¨™é¡Œå€åŸŸ -->
  <h2>çŒœ 4 ä½ä¸é‡è¤‡æ•¸å­—<br>ï¼ˆAç‚ºæ•¸å­—å°ä½ç½®å°ï¼Œ<br>Bç‚ºæ•¸å­—å°ä½ç½®ä¸å°ï¼‰</h2>

  <!-- ä½¿ç”¨è€…è¼¸å…¥æ¡†èˆ‡é€å‡ºæŒ‰éˆ• -->
  <input type="text" id="guess" maxlength="4">
  <button onclick="checkGuess()">é€å‡º</button>
  <button onclick="restartGame()">é‡æ–°é–‹å§‹</button>


  <!-- é¡¯ç¤ºã€ŒçŒœå°äº†ã€çµæœçš„åœ°æ–¹ -->
  <div id="result"></div>

  <!-- é¡¯ç¤ºæ­·å²ç´€éŒ„ -->
  <div id="history"></div>


  <h3>âœï¸ æ‰‹ç¹ªç­†è¨˜å€</h3>
    <canvas id="drawArea" width="300" height="300" style="border:1px solid #000;"></canvas><br>
    <button onclick="clearCanvas()">æ¸…é™¤ç•«é¢</button>


  <!-- JavaScriptï¼šéŠæˆ²é‚è¼¯ -->
  <script>

    let guessCount = 0; // çŒœçš„æ¬¡æ•¸

    // éš¨æ©Ÿç”¢ç”Ÿ 4 å€‹ä¸é‡è¤‡çš„æ•¸å­—ç•¶ä½œç­”æ¡ˆ
    let answer = generateAnswer();

    function generateAnswer() {
      let nums = [];
      while (nums.length < 4) {
        let n = Math.floor(Math.random() * 10); // ç”¢ç”Ÿ 0ï½9 çš„äº‚æ•¸
        if (!nums.includes(n)) nums.push(n);   // ç¢ºä¿ä¸é‡è¤‡æ‰åŠ é€²å»
      }
      return nums.join(''); // å›å‚³å­—ä¸²å‹å¼çš„ç­”æ¡ˆï¼Œä¾‹å¦‚ "7381"
    }

    // æª¢æŸ¥ä½¿ç”¨è€…çŒœçš„æ•¸å­—ä¸¦è¨ˆç®—å¹¾Aå¹¾B
    function checkGuess() {
      const input = document.getElementById('guess').value;
      guessCount++; // æ¯çŒœä¸€æ¬¡å°±åŠ ä¸€

      // é©—è­‰è¼¸å…¥æ ¼å¼ï¼šé•·åº¦å¿…é ˆæ˜¯4ã€ä¸”ä¸å¾—æœ‰é‡è¤‡æ•¸å­—
      if (input.length !== 4 || new Set(input).size !== 4) {
        alert('è«‹è¼¸å…¥ 4 å€‹ä¸é‡è¤‡çš„æ•¸å­—');    //alertæœƒè·³å‡ºæç¤ºè¦–çª—
        return;
      }

      let A = 0, B = 0;

      // è¨ˆç®—å¹¾Aå¹¾B
      for (let i = 0; i < 4; i++) {
        if (input[i] === answer[i]) A++;              // æ•¸å­—èˆ‡ä½ç½®éƒ½å° â†’ A
        else if (answer.includes(input[i])) B++;      // æ•¸å­—å°ä½†ä½ç½®ä¸å° â†’ B
      }

      // é¡¯ç¤ºçµæœåˆ°ç•«é¢ä¸Š
      const result = `${input} â†’ ${A}A${B}B`;
      document.getElementById('history').innerHTML += `<div>${result}</div>`;

      // å¦‚æœçŒœå°ï¼Œé¡¯ç¤ºæˆåŠŸè¨Šæ¯
      if (A === 4) {
        document.getElementById('result').innerHTML = `<strong>ç­”å°å•¦ï¼<br>ç­”æ¡ˆæ˜¯ ${answer}ï¼Œ<br>ä½ ç¸½å…±çŒœäº† ${guessCount} æ¬¡ï¼</strong>`;

        // è®“è¼¸å…¥æ¡†ç„¡æ³•å†è¼¸å…¥
        document.getElementById('guess').disabled = true;

        // è®“é€å‡ºæŒ‰éˆ•ä¹Ÿä¸èƒ½å†æŒ‰
        document.querySelector('button').disabled = true;

      }

      // æ¯æ¬¡çŒœå®Œéƒ½æ¸…ç©ºè¼¸å…¥æ¡†
        document.getElementById('guess').value = '';

    }




    function restartGame() {
        guessCount = 0;

  // é‡æ–°ç”¢ç”Ÿç­”æ¡ˆ
  answer = generateAnswer();

  // æ¸…ç©ºè¼¸å…¥æ¡†ã€çµæœã€æ­·å²ç´€éŒ„
  document.getElementById('guess').value = '';
  document.getElementById('result').innerHTML = '';
  document.getElementById('history').innerHTML = '';

  // æ¢å¾©è¼¸å…¥èˆ‡æŒ‰éˆ•åŠŸèƒ½
  document.getElementById('guess').disabled = false;
  document.querySelector('button').disabled = false;
}









// ğŸ–Œï¸ ç¹ªåœ–åŠŸèƒ½
const canvas = document.getElementById('drawArea');
const ctx = canvas.getContext('2d');
let drawing = false;

canvas.addEventListener('mousedown', startDraw);
canvas.addEventListener('mousemove', draw);
canvas.addEventListener('mouseup', () => drawing = false);
canvas.addEventListener('mouseleave', () => drawing = false);

// æ‰‹æŒ‡æ”¯æ´ï¼ˆæ‰‹æ©Ÿï¼‰
canvas.addEventListener('touchstart', e => {
  e.preventDefault();
  const touch = e.touches[0];
  const rect = canvas.getBoundingClientRect();
  const x = touch.pageX - rect.left - window.scrollX;
  const y = touch.pageY - rect.top - window.scrollY;
  canvas.dispatchEvent(new MouseEvent("mousedown", {
    clientX: x,
    clientY: y
  }));
});
canvas.addEventListener('touchmove', e => {
  e.preventDefault();
  const touch = e.touches[0];
  const rect = canvas.getBoundingClientRect();
  const x = touch.pageX - rect.left - window.scrollX;
  const y = touch.pageY - rect.top - window.scrollY;
  canvas.dispatchEvent(new MouseEvent("mousemove", {
    clientX: x,
    clientY: y
  }));
});

canvas.addEventListener('touchend', () => drawing = false);

function startDraw(e) {
  drawing = true;
  draw(e);
}

function draw(e) {
  if (!drawing) return;
  const rect = canvas.getBoundingClientRect();
  ctx.lineWidth = 2;
  ctx.lineCap = 'round';
  ctx.strokeStyle = '#000';
  ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
}

function clearCanvas() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.beginPath();
}



  </script>
</body>
</html>
